Plop
======

å¾®å‹ç”Ÿæˆå™¨æ¡†æ¶ï¼Œä½¿æ•´ä¸ªå›¢é˜Ÿèƒ½å¤Ÿè½»æ¾åœ°åˆ›å»ºå…·æœ‰ä¸€è‡´æ€§çš„æ–‡ä»¶ã€‚
![plop demo](https://i.imgur.com/penUFkr.gif)

> [æ–‡æ¡£ä¹Ÿå¯ä»¥åœ¨ plopjs.com ä¸Šæ‰¾åˆ°](https://plopjs.com/documentation/)

# å…¥é—¨æŒ‡å—
[![npm](https://img.shields.io/npm/dm/plop.svg)](https://www.npmjs.com/package/plop)
&nbsp;
[![npm](https://img.shields.io/npm/v/plop.svg)](https://www.npmjs.com/package/plop)
&nbsp;
[![plop on slack](https://img.shields.io/badge/slack-join%20workspace-green)](https://join.slack.com/t/plopjs/shared_invite/zt-ehh69el1-2_DjgZRuMbpC9RnEa4M8cA)

## Plopæ˜¯ä»€ä¹ˆï¼Ÿ

æˆ‘å–œæ¬¢æŠŠ Plop ç§°ä¸ºâ€œå¾®å‹ç”Ÿæˆå™¨æ¡†æ¶â€ã€‚
ç°åœ¨ï¼Œæˆ‘ç§°å…¶ä¸ºâ€œå°å·¥å…·â€ï¼Œå› ä¸ºå®ƒä¸ºæ‚¨æä¾›äº†ä¸€ç§ä»¥ä¸€è‡´çš„æ–¹å¼ç”Ÿæˆä»£ç æˆ–ä»»ä½•å…¶ä»–ç±»å‹çš„çº¯æ–‡æœ¬æ–‡ä»¶çš„ç®€å•æ–¹æ³•ã€‚
æ‚¨ä¼šçœ‹åˆ°ï¼Œæˆ‘ä»¬éƒ½åœ¨ä»£ç ä¸­åˆ›å»ºäº†ç»“æ„å’Œæ¨¡å¼ï¼ˆè·¯ç”±ï¼Œæ§åˆ¶å™¨ï¼Œç»„ä»¶ï¼Œå¸®åŠ©ç¨‹åºç­‰ï¼‰ã€‚
è¿™äº›æ¨¡å¼ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œå˜åŒ–å’Œæ”¹è¿›ï¼Œå› æ­¤å½“æ‚¨éœ€è¦åœ¨æ­¤å¤„åˆ›å»ºæ–°çš„â€œåœ¨æ¨¡å¼ä¸­æ’å…¥åç§°â€æ—¶ï¼Œåœ¨ä»£ç åº“ä¸­æŸ¥æ‰¾ä»£è¡¨å½“å‰â€œæœ€ä½³å®è·µâ€çš„æ–‡ä»¶å¹¶ä¸æ€»æ˜¯é‚£ä¹ˆå®¹æ˜“ã€‚ é‚£å°±æ˜¯æŒ½æ•‘æ‚¨çš„åœ°æ–¹ã€‚ 
ä½¿ç”¨ plopï¼Œæ‚¨å°†æ‹¥æœ‰åœ¨ä»£ç ä¸­åˆ›å»ºä»»ä½•ç»™å®šæ¨¡å¼çš„â€œæœ€ä½³å®è·µâ€æ–¹æ³•ã€‚ å¯ä»¥é€šè¿‡é”®å…¥`plop`ä»ç»ˆç«¯è½»æ¾è¿è¡Œä»£ç ã€‚
è¿™ä¸ä»…ä½¿æ‚¨å…äºåœ¨ä»£ç åº“ä¸­å››å¤„å¯»æ‰¾è¦å¤åˆ¶çš„æ­£ç¡®æ–‡ä»¶ï¼Œè€Œä¸”è¿˜ä½¿â€œæ­£ç¡®çš„æ–¹å¼â€å˜æˆäº†â€œåˆ›å»ºæ–°æ–‡ä»¶çš„æœ€ç®€å•çš„æ–¹å¼â€ã€‚

å¦‚æœå°† plop å½’ç»“ä¸ºå®ƒçš„æ ¸å¿ƒï¼Œå®ƒåŸºæœ¬ä¸Šæ˜¯ [inquirer](https://github.com/SBoudrias/Inquirer.js/) ç¨‹åºæç¤ºç¬¦å’Œ
[handlebar](https://github.com/wycats/handlebars.js/) æ¨¡æ¿ä¹‹é—´çš„ç²˜åˆä»£ç ã€‚

> è¿™ä¸ªæ–‡æ¡£æ˜¯ä¸€ä¸ªæ­£åœ¨è¿›è¡Œçš„å·¥ä½œã€‚å¦‚æœä½ æœ‰å¥½ä¸»æ„ï¼Œæˆ‘å¾ˆä¹æ„å¬å¬ã€‚

## å®‰è£…
### 1. å°†plopæ·»åŠ åˆ°æ‚¨çš„é¡¹ç›®ä¸­
```
$ npm install --save-dev plop
```
### 2. å…¨å±€å®‰è£…plop(å¯é€‰ï¼Œä½†å»ºè®®, ä»¥ä¾¿äºè®¿é—®)
```
$ npm install -g plop
```
### 3. åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `plopfile.js`
``` javascript
module.exports = function (plop) {
	// è¿™é‡Œåˆ›å»ºè‡ªå·±çš„ç”Ÿæˆå™¨
	plop.setGenerator('basics', {
		description: 'è¿™æ˜¯ä¸€ä¸ªéª¨æ¶ plopfile',
		prompts: [], // inquirer ç¨‹åºæç¤ºç¬¦æ•°ç»„
		actions: []  // æ“ä½œæ•°æ®
	});
};
```

## ä½ çš„ç¬¬ä¸€ä¸ªPlopfile
plopfileä½œä¸ºä¸€ä¸ªä½çº§çš„èŠ‚ç‚¹æ¨¡å—å¼€å§‹å®ƒçš„ç”Ÿå‘½ï¼Œå®ƒå¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å— `plop` å¯¹è±¡ä½œä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚

``` javascript
module.exports = function (plop) {};
```

`plop` å¯¹è±¡æš´éœ²äº†åŒ…å« `setGenerator(name, config)` å‡½æ•°çš„ plop api å¯¹è±¡ã€‚
è¿™æ˜¯ç”¨äº(ç­‰å¾…)ä¸ºè¿™ä¸ª plopfile åˆ›å»ºç”Ÿæˆå™¨çš„å‡½æ•°ã€‚
å½“åœ¨è¿™ä¸ªç›®å½•(æˆ–ä»»ä½•å­ç›®å½•)çš„ç»ˆç«¯ä¸­è¿è¡Œ `plop` æ—¶ï¼Œå°†æ˜¾ç¤ºè¿™äº›ç”Ÿæˆå™¨çš„åˆ—è¡¨ã€‚

è®©æˆ‘ä»¬å°è¯•è®¾ç½®ä¸€ä¸ªåŸºæœ¬çš„ç”Ÿæˆå™¨ï¼Œçœ‹çœ‹æ•ˆæœå¦‚ä½•ã€‚

``` javascript
module.exports = function (plop) {
	// ç”Ÿæˆå™¨çš„æ§åˆ¶å™¨
	plop.setGenerator('controller', {
		description: 'åº”ç”¨ç¨‹åºæ§åˆ¶å™¨é€»è¾‘',
		prompts: [{
			type: 'input',
			name: 'name',
			message: 'è¯·è¾“å…¥æ§åˆ¶å™¨åç§°'
		}],
		actions: [{
			type: 'add',
			path: 'src/{{name}}.js',
			templateFile: 'plop-templates/controller.hbs'
		}]
	});
};
```

æˆ‘ä»¬ä¸Šé¢åˆ›å»ºçš„*æ§åˆ¶å™¨*ç”Ÿæˆå™¨å°†é—®æˆ‘ä»¬ä¸€ä¸ªé—®é¢˜ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ã€‚
è¿™å¯ä»¥æ‰©å±•ä¸ºæ ¹æ®éœ€è¦æå‡ºå°½å¯èƒ½å¤šçš„é—®é¢˜ï¼Œå¹¶åˆ›å»ºå°½å¯èƒ½å¤šçš„æ–‡ä»¶ã€‚
è¿˜æœ‰ä¸€äº›é¢å¤–çš„æ“ä½œå¯ä»¥ç”¨æ¥ä»¥ä¸åŒçš„æ–¹å¼æ”¹å˜æˆ‘ä»¬çš„ä»£ç åº“ã€‚

## ä½¿ç”¨æç¤º

Plopä½¿ç”¨[inquirer.js](https://github.com/SBoudrias/Inquirer.js)åº“æ¥æ”¶é›†ç”¨æˆ·æ•°æ®ã€‚
åœ¨ inquirer.js å®˜ç½‘å¯ä»¥æ‰¾åˆ°[prompt types](https://github.com/SBoudrias/Inquirer.js/#prompt-types)åˆ—è¡¨ã€‚

## CLI ä½¿ç”¨

å®‰è£…äº† plop å¹¶åˆ›å»ºäº†ä¸€ä¸ªç”Ÿæˆå™¨ä¹‹åï¼Œå°±å¯ä»¥ä»ç»ˆç«¯è¿è¡Œplopäº†ã€‚
è¿è¡Œä¸å¸¦å‚æ•°çš„ plop å°†æä¾›ä¸€ä¸ªç”Ÿæˆå™¨åˆ—è¡¨ä¾›æ‚¨é€‰æ‹©ã€‚
ä½ ä¹Ÿå¯ä»¥è¿è¡Œ `plop [generatorName]` æ¥ç›´æ¥è§¦å‘ä¸€ä¸ªç”Ÿæˆå™¨ã€‚
å¦‚æœä½ æ²¡æœ‰å…¨å±€å®‰è£… plopï¼Œä½ éœ€è¦è®¾ç½®ä¸€ä¸ª npm è„šæœ¬æ¥è¿è¡Œ plopã€‚

```javascript
// package.json
{
    ...,
    "scripts": {
        "plop": "plop"
    },
    ...
}
```

### æ—è·¯æç¤º

ä¸€æ—¦æ‚¨å¾ˆå¥½åœ°äº†è§£äº†ä¸€ä¸ªé¡¹ç›®(åŠå…¶ç”Ÿæˆå™¨)ï¼Œæ‚¨å¯èƒ½å¸Œæœ›åœ¨è¿è¡Œç”Ÿæˆå™¨æ—¶ä¸ºæç¤ºæä¾›ç­”æ¡ˆã€‚
ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘æœ‰ä¸€ä¸ªæœ‰ä¸€ä¸ªæç¤ºç¬¦(åç§°)çš„ `component` ç”Ÿæˆå™¨ï¼Œæˆ‘å¯ä»¥ä½¿ç”¨ `plop component "some component name"` è¿è¡Œè¯¥ç”Ÿæˆå™¨ï¼Œ
å®ƒä¼šç«‹å³æ‰§è¡Œï¼Œå°±åƒæˆ‘åœ¨æç¤ºç¬¦ä¸­è¾“å…¥äº†"some component name"ä¸€æ ·ã€‚
å¦‚æœåŒä¸€ä¸ªç”Ÿæˆå™¨æœ‰ç¬¬äºŒä¸ªæç¤ºç¬¦ï¼Œé‚£ä¹ˆåŒæ ·çš„è¾“å…¥å°†ä¼šæç¤ºç”¨æˆ·è¾“å…¥ç¬¬äºŒä¸ªå€¼ã€‚

åƒ `confirm` å’Œ`list`è¿™æ ·çš„æç¤ºå°½é‡è®©ä½ çš„è¾“å…¥æœ‰æ„ä¹‰ã€‚
ä¾‹å¦‚ï¼Œè¾“å…¥â€œyâ€ï¼Œâ€œyesâ€ï¼Œâ€œtâ€ï¼Œæˆ–â€œtrueâ€ä½œä¸ºç¡®è®¤æç¤ºç¬¦å°†ä¼šå¾—åˆ°ä¸€ä¸ªå¸ƒå°”å€¼ã€‚
æ‚¨å¯ä»¥ä½¿ç”¨é¡¹çš„å€¼ã€ç´¢å¼•ã€é”®æˆ–åç§°ä»åˆ—è¡¨ä¸­é€‰æ‹©é¡¹ã€‚
å¤é€‰æ¡†æç¤ºå¯ä»¥æ¥å—ç”¨é€—å·åˆ†éš”çš„å€¼åˆ—è¡¨ï¼Œä»¥ä¾¿é€‰æ‹©å¤šä¸ªå€¼ã€‚

![plop bypass demo](https://media.giphy.com/media/3ov9jQ38ypmX4SuT60/giphy.gif)

> å¦‚æœä½ æƒ³ä¸ºç¬¬äºŒä¸ªæç¤ºç¬¦è€Œä¸æ˜¯ç¬¬ä¸€ä¸ªæç¤ºç¬¦æä¾›æ—è·¯è¾“å…¥ï¼Œ
> ä½ å¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ "\_" æ¥è·³è¿‡æ—è·¯(å³`plop component _ "input for second prompt"`)ã€‚

Plop ä¸ºæ ‡å‡†çš„ inquirer æç¤ºæä¾›äº†å†…ç½®çš„æ—è·¯é€»è¾‘ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›æ–¹æ³•å¯ä»¥æä¾›è‡ªå®šä¹‰çš„é€»è¾‘æ¥å¤„ç†ç‰¹å®šæç¤ºçš„ç”¨æˆ·è¾“å…¥ã€‚

å¦‚æœæ‚¨å·²ç»å‘å¸ƒäº†ç¬¬3æ–¹æŸ¥è¯¢è€…æç¤ºæ’ä»¶ï¼Œå¹¶ä¸”æƒ³ä¸ºå³è£…å³ç”¨ç”¨æˆ·æä¾›æ—è·¯åŠŸèƒ½ï¼Œ[åˆ™æœ¬æ–‡æ¡£çš„å¦ä¸€éƒ¨åˆ†å°†](#ç¬¬ä¸‰æ–¹æç¤ºæ—è·¯)å¯¹æ­¤è¿›è¡Œä»‹ç»ã€‚

### æ—è·¯æç¤º(æŒ‰åç§°)
è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨ `--` åç§°æ—è·¯æç¤ºï¼Œç„¶åä¸ºå¸Œæœ›æ—è·¯çš„æ¯ä¸ªæç¤ºæä¾›å‚æ•°ã€‚[ä¸‹é¢](#bypass-examples)çš„ä¾‹å­ã€‚

#### æ—è·¯ç¤ºä¾‹
```
## æ—è·¯æç¤ºç¬¦ 1 å’Œ 2
$ plop component "my component" react
$ plop component -- --name "my component" --type react

## ä»…è·³è¿‡æç¤ºç¬¦ 2 (å°†æç¤ºåç§°)
$ plop component _ react
$ plop component -- --type react
```

### å¼ºåˆ¶è¿è¡Œç”Ÿæˆå™¨
é»˜è®¤æƒ…å†µä¸‹ï¼ŒPlopæ“ä½œå¯ä»¥è®©ä½ çš„æ–‡ä»¶å®‰å…¨ï¼Œå½“äº‹æƒ…çœ‹èµ·æ¥å¯ç–‘æ—¶å¤±è´¥ã€‚
æœ€æ˜æ˜¾çš„ä¾‹å­æ˜¯ä¸å…è®¸[`add`](#add)æ“ä½œè¦†ç›–å·²ç»å­˜åœ¨çš„æ–‡ä»¶ã€‚
Plopæ“ä½œå•ç‹¬æ”¯æŒ `force` å±æ€§ï¼Œä½†ä½ ä¹Ÿå¯ä»¥åœ¨ç»ˆç«¯è¿è¡Œ Plop æ—¶ä½¿ç”¨ `--force` æ ‡å¿—ã€‚
ä½¿ç”¨ `--force` æ ‡å¿—å°†å‘Šè¯‰æ¯ä¸ªè¡ŒåŠ¨éƒ½å¿…é¡»å¼ºåŠ›æ‰§è¡Œã€‚æœ‰å¤§èƒ½åŠ›â€¦â€¦ğŸ•·

## ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç”Ÿæˆå™¨ï¼Ÿ
å› ä¸ºå½“æ‚¨ä»ä»£ç ä¸­ç‹¬ç«‹åˆ›å»ºæ ·æ¿æ–‡ä»¶æ—¶ï¼Œæ‚¨è‡ªç„¶ä¼šæŠ•å…¥æ›´å¤šçš„æ—¶é—´å’Œæ€è€ƒã€‚

å› ä¸ºå½“åˆ›å»ºæ¯ä¸ªè·¯ç”±ã€ç»„ä»¶ã€æ§åˆ¶å™¨ã€åŠ©æ‰‹ã€æµ‹è¯•ã€è§†å›¾ç­‰æ—¶ï¼Œå¯ä»¥ä¸ºä½ çš„å›¢é˜Ÿ(æˆ–ä½ è‡ªå·±)èŠ‚çœ 5 - 15 åˆ†é’Ÿ, [çœŸçš„åŠ èµ·æ¥](https://xkcd.com/1205/)ã€‚

å› ä¸º[ä¸Šä¸‹æ–‡åˆ‡æ¢éå¸¸æ˜‚è´µ](https://www.petrikainulainen.net/software-development/processes/the-cost-of-context-switching/)ï¼Œå¹¶ä¸”èŠ‚çœæ—¶é—´å¹¶ä¸æ˜¯[è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹](https://kentcdodds.com/blog/automation)çš„å”¯ä¸€å¥½å¤„

# Plopfile Api

plopfile api æ˜¯ç”± `plop` å¯¹è±¡å…¬å¼€çš„æ–¹æ³•é›†åˆã€‚å¤§éƒ¨åˆ†å·¥ä½œæ˜¯ç”±[`setGenerator`](#setgenerator)å®Œæˆçš„ï¼Œä½†æœ¬èŠ‚ä»‹ç»äº† plopfile ä¸­å¯èƒ½ä¹Ÿæœ‰ç”¨çš„å…¶ä»–æ–¹æ³•ã€‚

## TypeScript å£°æ˜

`plop` ç»‘å®šTypeScriptå£°æ˜ã€‚
ä¸ç®¡ä½ æ˜¯å¦ç”¨ TypeScript ç¼–å†™plopfileï¼Œå¾ˆå¤šç¼–è¾‘å™¨éƒ½ä¼šé€šè¿‡è¿™äº›å£°æ˜æä¾›ä»£ç å¸®åŠ©ã€‚

```javascript
// plopfile.ts
import {NodePlopAPI} from 'plop';

export default function (plop: NodePlopAPI) {
  // plop ç”Ÿæˆå™¨ä»£ç 
};
```

```javascript
// plopfile.js
module.exports = function (
	/** @type {import('plop').NodePlopAPI} */
	plop
) {
	// plop ç”Ÿæˆå™¨ä»£ç 
};
```

## ä¸»è¦æ–¹æ³•
è¿™äº›æ˜¯åœ¨åˆ›å»º plopfile æ—¶å¸¸ç”¨çš„æ–¹æ³•ã€‚å…¶ä»–ä¸»è¦ç”¨äºå†…éƒ¨ä½¿ç”¨çš„æ–¹æ³•åœ¨[å…¶ä»–æ–¹æ³•](#å…¶ä»–æ–¹æ³•)ä¸€èŠ‚ä¸­åˆ—å‡ºã€‚

æ–¹æ³• | å‚æ•° | è¿”å› | è¯´æ˜
------ | ---------- | ------- | -----------
[**setGenerator**](#setgenerator) | *String, [GeneratorConfig](#interface-generatorconfig)* | *[GeneratorConfig](#interface-generatorconfig)* | è®¾ç½®ä¸€ä¸ªç”Ÿæˆå™¨
[**setHelper**](#sethelper) | *String, Function* | | è®¾ç½®ä¸€ä¸ª handlebars åŠ©æ‰‹
[**setPartial**](#setpartial) | *String, String* | | è®¾ç½®ä¸€ä¸ª handlebars éƒ¨åˆ†
[**setActionType**](#setactiontype) | *String, [CustomAction](#functionsignature-è‡ªå®šä¹‰æ“ä½œ)* | | æ³¨å†Œä¸€ä¸ªè‡ªå®šä¹‰æ“ä½œç±»å‹
[**setPrompt**](#setprompt) | *String, InquirerPrompt* | | registers a custom prompt type with inquirer
[**load**](https://github.com/amwmedia/plop/blob/master/plop-load.md) | *Array[String], Object, Object* | | loads generators, helpers and/or partials from another plopfile or npm module

## setHelper

`setHelper` ç›´æ¥å¯¹åº”äº handlebars æ–¹æ³•`registerHelper`ã€‚ å› æ­¤ï¼Œå¦‚æœæ‚¨ç†Ÿæ‚‰[handlebars helpers](https://handlebarsjs.com/guide/expressions.html#helpers)ï¼Œé‚£ä¹ˆæ‚¨å·²ç»çŸ¥é“å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

``` javascript
module.exports = function (plop) {
	plop.setHelper('upperCase', function (text) {
		return text.toUpperCase();
	});

	// æˆ–è€…åœ¨ es6/es2015
	plop.setHelper('upperCase', (txt) => txt.toUpperCase());
};
```

## setPartial
`setPartial` ç›´æ¥å¯¹åº”äº handlebars æ–¹æ³• `registerPartial`ã€‚ å› æ­¤ï¼Œå¦‚æœæ‚¨ç†Ÿæ‚‰[handlebars partials](https://handlebarsjs.com/guide/partials.html)ï¼Œé‚£ä¹ˆæ‚¨å·²ç»çŸ¥é“å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

``` javascript
module.exports = function (plop) {
	plop.setPartial('myTitlePartial', '<h1>{{titleCase name}}</h1>');
	// åœ¨æ¨¡æ¿ä¸­ç”¨ä½œ {{> myTitlePartial }}
};
```

## setActionType
`setActionType` å…è®¸ä½ åˆ›å»ºè‡ªå·±çš„æ“ä½œ(ç±»ä¼¼äº`add`æˆ–`modify`)ï¼Œå¯ä»¥åœ¨ä½ çš„ plopfiles ä¸­ä½¿ç”¨ã€‚å®ƒä»¬åŸºæœ¬ä¸Šæ˜¯é«˜åº¦å¯é‡ç”¨çš„[è‡ªå®šä¹‰æ“ä½œå‡½æ•°](#custom-action-function-)ã€‚

### *FunctionSignature* è‡ªå®šä¹‰æ“ä½œ
å‚æ•° | ç±»å‹ | è¯´æ˜
---------- | ---- | -----------
**answers** | *Object* | ç”Ÿæˆå™¨æç¤ºçš„ç­”æ¡ˆ
**config** | *[ActionConfig](#interface-actionconfig)* | ç”Ÿæˆå™¨çš„ `actions` æ•°ç»„ä¸­çš„å¯¹è±¡
**plop** | *[PlopfileApi](#plopfile-api)* | è¿™ä¸ªæ“ä½œæ­£åœ¨è¿è¡Œçš„ plopfile çš„ plop api

``` javascript
module.exports = function (plop) {

	plop.setActionType('doTheThing', function (answers, config, plop) {
		// åšç‚¹ä»€ä¹ˆ
		doSomething(config.configProp);
		// å¦‚æœå‡ºäº†ä»€ä¹ˆé—®é¢˜
		throw 'é”™è¯¯æ¶ˆæ¯';
		// å¦åˆ™
		return 'æˆåŠŸçŠ¶æ€æ¶ˆæ¯';
	});

	// æˆ–åœ¨æ“ä½œä¸­æ‰§è¡Œå¼‚æ­¥æ“ä½œ
	plop.setActionType('doTheAsyncThing', function (answers, config, plop) {
		// åšç‚¹ä»€ä¹ˆ
		return new Promise((resolve, reject) => {
			if (success) {
				resolve('æˆåŠŸçŠ¶æ€æ¶ˆæ¯');
			} else {
				reject('error message');
			}
		});
	});

	// ä½¿ç”¨è‡ªå®šä¹‰æ“ä½œ
	plop.setGenerator('test', {
		prompts: [],
		actions: [{
			type: 'doTheThing',
			configProp: 'available from the config param'
		}, {
			type: 'doTheAsyncThing',
			speed: 'slow'
		}]
	});
};
```

## setPrompt
[Inquirer](https://github.com/SBoudrias/Inquirer.js) æä¾›äº†è®¸å¤šå¼€ç®±å³ç”¨çš„æç¤ºç±»å‹ï¼Œä½†å®ƒä¹Ÿå…è®¸å¼€å‘äººå‘˜æ„å»ºæç¤ºæ’ä»¶ã€‚
å¦‚æœä½ æƒ³ä½¿ç”¨ä¸€ä¸ªæç¤ºæ’ä»¶ï¼Œä½ å¯ä»¥ç”¨`setPrompt`æ³¨å†Œå®ƒã€‚
æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§[ç”¨äºæ³¨å†Œæç¤ºçš„æŸ¥è¯¢è€…æ–‡æ¡£](https://github.com/SBoudrias/Inquirer.js#inquirerregisterpromptname-prompt)ã€‚
å¦è¯·æŸ¥çœ‹[plopç¤¾åŒºé©±åŠ¨çš„è‡ªå®šä¹‰æç¤ºåˆ—è¡¨](https://github.com/amwmedia/plop/blob/master/inquirer-prompts.md)ã€‚

``` javascript
const promptDirectory = require('inquirer-directory');
module.exports = function (plop) {
	plop.setPrompt('directory', promptDirectory);
	plop.setGenerator('test', {
		prompts: [{
			type: 'directory',
			...
		}]
	});
};
```

## setGenerator
é…ç½®å¯¹è±¡éœ€è¦åŒ…å« `prompts` å’Œ `actions` ï¼ˆ`description` æ˜¯å¯é€‰çš„ï¼‰ã€‚
æç¤ºæ•°ç»„å°†ä¼ é€’ç»™ [inquirer](https://github.com/SBoudrias/Inquirer.js/#objects)ã€‚
`actions` æ•°ç»„æ˜¯è¦æ‰§è¡Œçš„æ“ä½œçš„åˆ—è¡¨ï¼ˆä¸‹é¢å°†è¯¦ç»†ä»‹ç»ï¼‰

### *Interface* `GeneratorConfig`
å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜
-------- | ---- | ------- | -----------
**description** | *[String]* | | å¯¹è¿™ä¸ªç”Ÿæˆå™¨çš„ç®€çŸ­æè¿°
**prompts** | *Array[[InquirerQuestion](https://github.com/SBoudrias/Inquirer.js/#question)]* | | å‘ç”¨æˆ·è¯¢é—®çš„é—®é¢˜
**actions** | *Array[[ActionConfig](#interface-actionconfig)]* | | è¦æ‰§è¡Œçš„æ“ä½œ

> å¦‚æœæ‚¨çš„æ“ä½œåˆ—è¡¨éœ€è¦åŠ¨æ€æ˜¾ç¤ºï¼Œè¯·æŸ¥çœ‹[ä½¿ç”¨åŠ¨æ€æ“ä½œæ•°ç»„](#ä½¿ç”¨åŠ¨æ€æ“ä½œæ•°ç»„)ã€‚

### *Interface* `ActionConfig`
ä¸‹é¢çš„å±æ€§æ˜¯plopå†…éƒ¨å¤„ç†çš„æ ‡å‡†å±æ€§ã€‚æ ¹æ®æ“ä½œçš„*ç±»å‹*ï¼Œè¿˜éœ€è¦å…¶ä»–å±æ€§ã€‚å†çœ‹ä¸€ä¸‹[å†…ç½®æ“ä½œ](#å†…ç½®æ“ä½œ)ã€‚

å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜
-------- | ---- | ------- | -----------
**type** | *String* | | æ“ä½œç±»å‹ ([`add`](#add), [`modify`](#modify), [`addMany`](#addmany), [etc](#setactiontype))
**force** | *Boolean* | `false` | [å¼ºåˆ¶æ‰§è¡Œæ“ä½œ](#å¼ºåˆ¶è¿è¡Œç”Ÿæˆå™¨)ï¼ˆæ ¹æ®æ“ä½œè¡¨ç¤ºä¸åŒçš„æ„æ€ï¼‰
**data** | *Object / Function* | `{}` | æŒ‡å®šåœ¨è¿è¡Œæ­¤æ“ä½œæ—¶åº”ä¸ç”¨æˆ·æç¤ºç­”æ¡ˆæ··åˆçš„æ•°æ®
**abortOnFail** | *Boolean* | `true` | å¦‚æœæ­¤æ“ä½œç”±äºä»»ä½•åŸå› å¤±è´¥ï¼Œåˆ™ä¸­æ­¢æ‰€æœ‰å°†æ¥çš„æ“ä½œ
**skip** | *Function* | | ä¸€ä¸ªå¯é€‰çš„å‡½æ•°ï¼ŒæŒ‡å®šæ“ä½œæ˜¯å¦åº”è¯¥è¿è¡Œ

> ä»»ä½• `ActionConfig` ä¸Šçš„ `data` å±æ€§ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè¿”å› `Object` çš„ `Function` ï¼Œ
> æˆ–è€…ä¸€ä¸ªè¿”å› `Promise` çš„ `Function` ï¼Œå®ƒå¯ä»¥ç”¨ `Object`æ¥è§£æã€‚

> ä»»ä½• `ActionConfig` ä¸Šçš„ `skip` å‡½æ•°éƒ½æ˜¯å¯é€‰çš„ï¼Œå¦‚æœè¯¥æ“ä½œåº”è¯¥è¢«è·³è¿‡ï¼Œ
> åˆ™åº”è¯¥è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¿”å›å€¼æ˜¯è·³è¿‡è¯¥æ“ä½œçš„åŸå› ã€‚

> é™¤äº† Action å¯¹è±¡ï¼Œ[è¿˜å¯ä»¥ä½¿ç”¨å‡½æ•°](#è‡ªå®šä¹‰-æ“ä½œå‡½æ•°-)

## å…¶ä»–æ–¹æ³•
æ–¹æ³• | å‚æ•° | è¿”å›å€¼ | è¯´æ˜
------ | ---------- | ------- | -----------
**getHelper** | *String* | *Function* | è·å–ä¸€ä¸ªåŠ©æ‰‹å‡½æ•°
**getHelperList** | | *Array[String]* | è·å–ä¸€ä¸ªåŠ©æ‰‹åç§°åˆ—è¡¨
**getPartial** | *String* | *String* | æŒ‰åå­—å– handlebars å±€éƒ¨
**getPartialList** | | *Array[String]* | è·å–ä¸€ä¸ªå±€éƒ¨åˆ—è¡¨
**getActionType** | *String* | *[CustomAction](#functionsignature-è‡ªå®šä¹‰æ“ä½œ)* | é€šè¿‡åç§°è·å–ä¸€ä¸ª actionType
**getActionTypeList** | | *Array[String]* | è·å– actionType åç§°åˆ—è¡¨
**setWelcomeMessage** | *String* | | è‡ªå®šä¹‰åœ¨è¿è¡Œ `plop` æ—¶è¦æ±‚æ‚¨é€‰æ‹©ç”Ÿæˆå™¨çš„æ˜¾ç¤ºæ¶ˆæ¯ã€‚
**getGenerator** | *String* | *[GeneratorConfig](#interface-generatorconfig)* | é€šè¿‡åç§°è·å– [GeneratorConfig](#interface-generatorconfig)
**getGeneratorList** | | *Array[Object]* | è·å–ç”Ÿæˆå™¨åç§°å’Œæè¿°çš„æ•°ç»„
**setPlopfilePath** | *String* | | è®¾ç½® `plopfilePath` å€¼ï¼Œè¯¥å€¼åœ¨å†…éƒ¨ç”¨äºå®šä½æ¨¡æ¿æ–‡ä»¶ç­‰èµ„æº
**getPlopfilePath** | | *String* | è¿”å›æ­£åœ¨ä½¿ç”¨çš„ plopfile çš„ç»å¯¹è·¯å¾„
**getDestBasePath** | | *String* | è¿”å›åˆ›å»ºæ–‡ä»¶æ—¶ä½¿ç”¨çš„åŸºæœ¬è·¯å¾„
**setDefaultInclude** | *Object* | *Object* | è®¾ç½®é»˜è®¤é…ç½®ï¼Œå¦‚æœè¿™ä¸ª plopfile è¢«å¦ä¸€ä¸ª plopfile ä½¿ç”¨ï¼Œä½¿ç”¨ `plop.load()`
**getDefaultInclude** | *String* | *Object* | è·å–é»˜è®¤é…ç½®ï¼Œå¦‚æœè¯¥é…ç½®æ–‡ä»¶è¢«å¦ä¸€ä¸ª plopfile ä½¿ç”¨ `plop.load()` ä½¿ç”¨ï¼Œå®ƒå°†ç”¨äºè¯¥plopfileã€‚
**renderString** | *String, Object* | *String* | ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°ï¼ˆ*Object*ï¼‰ä½œä¸ºæ•°æ®ï¼Œé€šè¿‡ handlebars æ¨¡æ¿æ¸²æŸ“å™¨è¿è¡Œç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆ*String*ï¼‰ã€‚ è¿”å›æ¸²æŸ“çš„æ¨¡æ¿ã€‚

# å†…ç½®æ“ä½œ
ä½ å¯ä»¥åœ¨ä½ çš„[GeneratorConfig](#interface-generatorconfig)ä¸­ä½¿ç”¨å‡ ç§ç±»å‹çš„å†…ç½®æ“ä½œã€‚
ä½ å¯ä»¥æŒ‡å®šæ“ä½œçš„ `type` (æ‰€æœ‰è·¯å¾„éƒ½åŸºäº plopfile çš„ä½ç½®)å’Œè¦ä½¿ç”¨çš„æ¨¡æ¿ã€‚

> `Add`ï¼Œ `AddMany` å’Œ `Modify` æ“ä½œæœ‰ä¸€ä¸ªå¯é€‰çš„ `transform` æ–¹æ³•ï¼Œå¯ç”¨äºåœ¨æ¨¡æ¿ç»“æœè¢«å†™å…¥ç£ç›˜ä¹‹å‰è½¬æ¢å®ƒã€‚
> `transform` å‡½æ•°ä»¥ `string`å½¢å¼æ¥æ”¶æ¨¡æ¿ç»“æœæˆ–æ–‡ä»¶å†…å®¹ï¼Œæ“ä½œæ•°æ®ä½œä¸ºå‚æ•°ã€‚
> å®ƒå¿…é¡»è¿”å›ä¸€ä¸ª `string` æˆ–ä¸€ä¸ª `Promise` æ¥è§£æä¸º `string`ã€‚
## Add
 `add` æ“ä½œç”¨äº(ä½ çŒœåˆ°äº†)å°†æ–‡ä»¶æ·»åŠ åˆ°é¡¹ç›®ä¸­ã€‚path å±æ€§æ˜¯ä¸€ä¸ª handlebars æ¨¡æ¿ï¼Œç”¨äºæŒ‰åç§°åˆ›å»ºæ–‡ä»¶ã€‚æ–‡ä»¶å†…å®¹å°†ç”± `template` æˆ– `templateFile` å±æ€§å†³å®šã€‚

å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜
-------- | ---- | ------- | -----------
**path** | *String* | | ä¸€ä¸ª handlebars æ¨¡æ¿ï¼ˆæ¸²æŸ“æ—¶ï¼‰æ˜¯æ–°æ–‡ä»¶çš„è·¯å¾„
**template** | *String* | | åº”è¯¥ç”¨äºæ„å»ºæ–°æ–‡ä»¶çš„ handlebars æ¨¡æ¿
**templateFile** | *String* | | åŒ…å« `template` çš„æ–‡ä»¶çš„è·¯å¾„
**skipIfExists** | *Boolean* | `false` | å¦‚æœæ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œåˆ™è·³è¿‡å®ƒ(è€Œä¸æ˜¯å¤±è´¥)
**transform** | *Function* | | [å¯é€‰åŠŸèƒ½](#å†…ç½®æ“ä½œ) ï¼Œå¯ç”¨äºåœ¨å°†æ–‡ä»¶å†™å…¥ç£ç›˜ä¹‹å‰è½¬æ¢æ¨¡æ¿ç»“æœ
**skip** | *Function* | | *ç»§æ‰¿è‡ª [ActionConfig](#interface-actionconfig)*
**force** | *Boolean* | `false` | *ç»§æ‰¿è‡ª [ActionConfig](#interface-actionconfig)* (å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™è¦†ç›–æ–‡ä»¶)
**data** | *Object* | `{}` | *ç»§æ‰¿è‡ª [ActionConfig](#interface-actionconfig)*
**abortOnFail** | *Boolean* | `true` | *ç»§æ‰¿è‡ª [ActionConfig](#interface-actionconfig)*

## AddMany
`addMany` æ“ä½œå¯ç”¨äºé€šè¿‡ä¸€ä¸ªæ“ä½œå°†å¤šä¸ªæ–‡ä»¶æ·»åŠ åˆ°é¡¹ç›®ä¸­ã€‚  `destination` å±æ€§æ˜¯ä¸€ä¸ª handlebars æ¨¡æ¿ï¼Œå°†ç”¨äºæ ‡è¯†ç”Ÿæˆçš„æ–‡ä»¶åº”æ”¾å…¥çš„æ–‡ä»¶å¤¹ã€‚  `base` å±æ€§å¯ç”¨äºæ›´æ”¹åœ¨åˆ›å»ºæ–‡ä»¶æ—¶åº”å¿½ç•¥æ¨¡æ¿è·¯å¾„çš„å“ªä¸€éƒ¨åˆ†ã€‚ å¦‚æœæ‚¨å¸Œæœ›æ·»åŠ çš„æ–‡ä»¶åæ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆ `templateFiles` å…¨å±€æ–‡ä»¶æ‰€ä½äºçš„è·¯å¾„å¯ä»¥åœ¨å®ƒä»¬çš„æ–‡ä»¶/æ–‡ä»¶å¤¹åç§°ä¸­ä½¿ç”¨ handlebars è¯­æ³•ï¼ˆä¾‹å¦‚ï¼š`{{ dashCase name }}.spec.js`ï¼‰ã€‚

å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜
-------- | ---- | ------- | -----------
**destination** | *String* | | handlebarsæ¨¡æ¿(åœ¨æ¸²æŸ“æ—¶)æ˜¯æ–°æ–‡ä»¶çš„ç›®æ ‡æ–‡ä»¶å¤¹
**base** | *String* | | å‘ `destination` æ–‡ä»¶å¤¹æ·»åŠ æ–‡ä»¶æ—¶åº”æ’é™¤çš„è·¯å¾„éƒ¨åˆ†
**templateFiles** | *[Glob](https://github.com/sindresorhus/globby#globbing-patterns)* | | ä¸è¦æ·»åŠ çš„å¤šä¸ªæ¨¡æ¿æ–‡ä»¶åŒ¹é…çš„å…¨å±€æ¨¡å¼
**stripExtensions** | *[String]* | `['hbs']` | å½“è¢«æ·»åŠ åˆ° `destination` æ—¶ï¼Œåº”è¯¥ä» `templateFiles` æ–‡ä»¶åä¸­å‰¥ç¦»çš„æ–‡ä»¶æ‰©å±•å
**globOptions** | *[Object](https://github.com/sindresorhus/globby#options)* | | å…¨å±€é€‰é¡¹ï¼Œç”¨äºæ›´æ”¹ä¸è¦æ·»åŠ çš„æ¨¡æ¿æ–‡ä»¶çš„åŒ¹é…æ–¹å¼
**verbose** | *Boolean* | `true` | æ‰“å°æ¯ä¸ªæˆåŠŸæ·»åŠ çš„æ–‡ä»¶è·¯å¾„
**transform** | *Function* | | [å¯é€‰åŠŸèƒ½](#å†…ç½®æ“ä½œ) å¯ä»¥åœ¨å°†æ¯ä¸ªæ–‡ä»¶å†™å…¥ç£ç›˜ä¹‹å‰è½¬æ¢æ¨¡æ¿ç»“æœ
**skip** | *Function* | | *ç»§æ‰¿è‡ª [ActionConfig](#interface-actionconfig)*
**skipIfExists** | *Boolean* | `false` | *ç»§æ‰¿è‡ª [Add](#add)* (è·³è¿‡å·²ç»å­˜åœ¨çš„æ–‡ä»¶)
**force** | *Boolean* | `false` | *ç»§æ‰¿è‡ª [ActionConfig](#interface-actionconfig)* (å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™è¦†ç›–æ–‡ä»¶)
**data** | *Object* | `{}` | *ç»§æ‰¿è‡ª [ActionConfig](#interface-actionconfig)*
**abortOnFail** | *Boolean* | `true` | *ç»§æ‰¿è‡ª [ActionConfig](#interface-actionconfig)*

## Modify
å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼ä½¿ç”¨ `modify` æ“ä½œã€‚ æ‚¨å¯ä»¥ä½¿ç”¨ `pattern` å±æ€§åœ¨æŒ‡å®šçš„ `path` ä¸­æŸ¥æ‰¾/æ›¿æ¢æ–‡ä»¶ä¸­çš„æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ `transform` å‡½æ•°æ¥è½¬æ¢æ–‡ä»¶å†…å®¹ã€‚  `pattern` å’Œ `transform` éƒ½å¯ä»¥åŒæ—¶ä½¿ç”¨ï¼ˆ `transform` å°†æœ€åå‘ç”Ÿï¼‰ã€‚ å¯ä»¥åœ¨ example æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°æœ‰å…³ä¿®æ”¹çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚

å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜
-------- | ---- | ------- | -----------
**path** | *String* | | handlebarsæ¨¡æ¿(åœ¨æ¸²æŸ“æ—¶)æ˜¯è¦ä¿®æ”¹çš„æ–‡ä»¶çš„è·¯å¾„
**pattern** | *RegExp* | _end&#x2011;of&#x2011;file_ | ç”¨äºåŒ¹é…åº”æ›¿æ¢æ–‡æœ¬çš„æ­£åˆ™è¡¨è¾¾å¼
**template** | *String* | | handlebars æ¨¡æ¿ï¼Œåº”è¯¥å–ä»£ä»€ä¹ˆæ˜¯åŒ¹é…çš„`pattern`ã€‚æ•è·ç»„æœ‰ $1ã€$2 ç­‰
**templateFile** | *String* | | è·¯å¾„åŒ…å« `template` çš„æ–‡ä»¶
**transform** | *Function* | | [å¯é€‰åŠŸèƒ½](#å†…ç½®æ“ä½œ) å¯ç”¨äºåœ¨å°†æ–‡ä»¶å†™å…¥ç£ç›˜ä¹‹å‰è½¬æ¢æ–‡ä»¶
**skip** | *Function* | | *ç»§æ‰¿è‡ª [ActionConfig](#interface-actionconfig)*
**data** | *Object* | `{}` | *ç»§æ‰¿è‡ª [ActionConfig](#interface-actionconfig)*
**abortOnFail** | *Boolean* | `true` | *ç»§æ‰¿è‡ª [ActionConfig](#interface-actionconfig)*

## Append
`append` æ“ä½œæ˜¯ `modify` çš„ä¸€ä¸ªå¸¸ç”¨å­é›†ã€‚å®ƒç”¨äºåœ¨æ–‡ä»¶çš„ç‰¹å®šä½ç½®è¿½åŠ æ•°æ®ã€‚

å±æ€§ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜
-------- | ---- | ------- | -----------
**path** | *String* | | handlebarsæ¨¡æ¿(åœ¨æ¸²æŸ“æ—¶)æ˜¯è¦ä¿®æ”¹çš„æ–‡ä»¶çš„è·¯å¾„
**pattern** | *RegExp, String* | | ç”¨äºåŒ¹é…åº”æ›¿æ¢æ–‡æœ¬çš„æ­£åˆ™è¡¨è¾¾å¼
**unique** | *Boolean* | `true` | æ˜¯å¦åˆ é™¤ç›¸åŒçš„æ¡ç›®
**separator** | *String* | `new line` | åˆ†éš”æ¡ç›®çš„å€¼
**template** | *String* | | å…¥å£ä½¿ç”¨çš„ handlebars æ¨¡æ¿
**templateFile** | *String* | | è·¯å¾„åŒ…å« `template` çš„æ–‡ä»¶
**data** | *Object* | `{}` | *ç»§æ‰¿è‡ª [ActionConfig](#interface-actionconfig)*
**abortOnFail** | *Boolean* | `true` | *ç»§æ‰¿è‡ª [ActionConfig](#interface-actionconfig)*

## è‡ªå®šä¹‰ (æ“ä½œå‡½æ•°)
`Add` å’Œ `Modify` æ“ä½œå‡ ä¹å¯ä»¥å¤„ç†plopæ—¨åœ¨å¤„ç†çš„æ¯ç§æƒ…å†µã€‚ ä½†æ˜¯ï¼Œplop ç¡®å®ä¸º node / js ä¸“å®¶æä¾›äº†è‡ªå®šä¹‰æ“ä½œåŠŸèƒ½ã€‚ 
è‡ªå®šä¹‰æ“ä½œå‡½æ•°æ˜¯åœ¨æ“ä½œæ•°ç»„ä¸­æä¾›çš„å‡½æ•°ã€‚
- è‡ªå®šä¹‰æ“ä½œå‡½æ•°ç”± plop ä»¥ç›¸åŒçš„ [CustomAction](#functionsignature-è‡ªå®šä¹‰æ“ä½œ) å‡½æ•°ç­¾åæ‰§è¡Œã€‚
- Plopå°†ç­‰å¾…è‡ªå®šä¹‰æ“ä½œå®Œæˆåå†æ‰§è¡Œä¸‹ä¸€ä¸ªæ“ä½œã€‚
- å¦‚æœä½ è¿”å›ä¸€ä¸ª `Promise`ï¼Œåœ¨ Promise è§£æä¹‹å‰æˆ‘ä»¬ä¸ä¼šå¯åŠ¨å…¶ä»–æ“ä½œã€‚
å¦‚æœæ‚¨è¿”å›ä¸€ä¸ªæ¶ˆæ¯(*String*)ï¼Œæˆ‘ä»¬çŸ¥é“æ“ä½œå·²ç»å®Œæˆï¼Œæˆ‘ä»¬å°†åœ¨æ“ä½œçš„çŠ¶æ€ä¸­æŠ¥å‘Šè¯¥æ¶ˆæ¯ã€‚
- å¦‚æœ promise è¢«æ‹’ç»ï¼Œæˆ–è€…å‡½æ•°æŠ›å‡º `Exception`ï¼Œåˆ™è‡ªå®šä¹‰æ“ä½œå¤±è´¥

_å‚è§ [plopfile ç¤ºä¾‹](https://github.com/amwmedia/plop/blob/master/example/plopfile.js)ï¼Œäº†è§£åŒæ­¥è‡ªå®šä¹‰æ“ä½œçš„ç¤ºä¾‹ã€‚_

## æ³¨é‡Š
é€šè¿‡åœ¨ action é…ç½®å¯¹è±¡ä¸­æ·»åŠ å­—ç¬¦ä¸²ï¼Œå¯ä»¥å°†æ³¨é‡Šè¡Œæ·»åŠ åˆ° actions æ•°ç»„ä¸­ã€‚
å½“ plop æ‰¾åˆ°æ³¨é‡Šæ—¶ï¼Œæ³¨é‡Šä¼šè¢«æ‰“å°åˆ°å±å¹•ä¸Šï¼Œè€Œä¸”æ³¨é‡Šæœ¬èº«æ²¡æœ‰ä»»ä½•åŠŸèƒ½ã€‚
# å†…ç½® Helpers
æˆ‘å‘ç°æœ‰ä¸€äº›éå¸¸æœ‰ç”¨çš„ Helpers å¯ä»¥åŒ…å«åœ¨ plop ä¸­ã€‚å®ƒä»¬å¤§å¤šæ˜¯å¤§å°å†™ä¿®é¥°ç¬¦ï¼Œä½†ä¸‹é¢æ˜¯å®Œæ•´çš„åˆ—è¡¨ã€‚

## æ¡ˆä¾‹è£…é¥°å™¨
- **camelCase**: changeFormatToThis
- **snakeCase**: change_format_to_this
- **dashCase/kebabCase**: change-format-to-this
- **dotCase**: change.format.to.this
- **pathCase**: change/format/to/this
- **properCase/pascalCase**: ChangeFormatToThis
- **lowerCase**: change format to this
- **sentenceCase**: Change format to this,
- **constantCase**: CHANGE_FORMAT_TO_THIS
- **titleCase**: Change Format To This

## å…¶ä»– Helpers
- **pkg**: ä»åŒ…ä¸­æŸ¥æ‰¾å±æ€§ package.json æ–‡ä»¶ä¸ plopfile åœ¨åŒä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚

# æ›´è¿›ä¸€æ­¥
ä½¿ç”¨ä¸€äº›åŸºæœ¬çš„ç”Ÿæˆå™¨å¹¶ä¸éœ€è¦å¾ˆå¤šä¸œè¥¿ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æƒ³æ›´è¿›ä¸€æ­¥ï¼Œè¯·é˜…è¯» young padawanã€‚

## ä½¿ç”¨åŠ¨æ€æ“ä½œæ•°ç»„
å¦å¤–ï¼Œ[GeneratorConfig](#interface-generatorconfig)çš„ `actions` å±æ€§æœ¬èº«å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°† answers æ•°æ®ä½œä¸ºå‚æ•°å¹¶è¿”å› actions æ•°ç»„ã€‚

è¿™å…è®¸ä½ æ ¹æ®æä¾›çš„ç­”æ¡ˆ(answers)è°ƒæ•´æ“ä½œæ•°ç»„:

``` javascript
module.exports = function (plop) {
	plop.setGenerator('test', {
		prompts: [{
			type: 'confirm',
			name: 'wantTacos',
			message: 'Do you want tacos?'
		}],
		actions: function(data) {
			var actions = [];

			if(data.wantTacos) {
				actions.push({
					type: 'add',
					path: 'folder/{{dashCase name}}.txt',
					templateFile: 'templates/tacos.txt'
				});
			} else {
				actions.push({
					type: 'add',
					path: 'folder/{{dashCase name}}.txt',
					templateFile: 'templates/burritos.txt'
				});
			}

			return actions;
		}
	});
};
```

## ç¬¬ä¸‰æ–¹æç¤ºæ—è·¯
å¦‚æœä½ å·²ç»å†™äº†ä¸€ä¸ª inquirer æç¤ºæ’ä»¶ï¼Œå¹¶ä¸”æƒ³è¦æ”¯æŒ plop çš„æ—è·¯åŠŸèƒ½ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯éå¸¸ç®€å•çš„ã€‚
æç¤ºå¯¼å‡ºçš„æ’ä»¶å¯¹è±¡åº”è¯¥æœ‰ä¸€ä¸ª `bypass` å‡½æ•°ã€‚
è¿™ä¸ª`bypass` å‡½æ•°å°†ç”± plop è¿è¡Œï¼Œç”¨æˆ·çš„è¾“å…¥ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæç¤ºé…ç½®å¯¹è±¡ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚
è¯¥å‡½æ•°è¿”å›çš„å€¼å°†æ·»åŠ åˆ°è¯¥æç¤ºçš„ç­”æ¡ˆæ•°æ®å¯¹è±¡ä¸­ã€‚

``` javascript
// My confirmation inquirer plugin
module.exports = MyConfirmPluginConstructor;
function MyConfirmPluginConstructor() {
	// ...your main plugin code
	this.bypass = (rawValue, promptConfig) => {
		const lowerVal = rawValue.toString().toLowerCase();
		const trueValues = ['t', 'true', 'y', 'yes'];
		const falseValues = ['f', 'false', 'n', 'no'];
		if (trueValues.includes(lowerVal)) return true;
		if (falseValues.includes(lowerVal)) return false;
		throw Error(`"${rawValue}" is not a valid ${promptConfig.type} value`);
	};
	return this;
}
```
> å¯¹äºä¸Šé¢çš„ç¤ºä¾‹ï¼Œæ—è·¯å‡½æ•°æ¥å—ç”¨æˆ·çš„æ–‡æœ¬è¾“å…¥ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ª `Boolean` å€¼ï¼Œä½œä¸ºæç¤ºç­”æ¡ˆæ•°æ®ã€‚

### æ·»åŠ æ—è·¯æ”¯æŒåˆ°æ‚¨çš„é…ç½®æ–‡ä»¶
å¦‚æœä½ ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹æç¤ºæ’ä»¶é»˜è®¤ä¸æ”¯æŒæ—è·¯ï¼Œä½ å¯ä»¥åœ¨æç¤ºçš„é…ç½®å¯¹è±¡ä¸­æ·»åŠ  `bypass` å‡½æ•°ï¼Œplop ä¼šä½¿ç”¨å®ƒæ¥å¤„ç†è¯¥æç¤ºçš„æ—è·¯æ•°æ®ã€‚

## åŒ…è£… Plop

Plopæä¾›äº†è®¸å¤šâ€œå…è´¹â€çš„å¼ºå¤§åŠŸèƒ½ã€‚
è¿™ä¸ªå®ç”¨ç¨‹åºéå¸¸å¼ºå¤§ï¼Œäº‹å®ä¸Šï¼Œä½ ç”šè‡³å¯ä»¥å°†`plop`åŒ…è£…åˆ°ä½ è‡ªå·±çš„ CLI é¡¹ç›®ä¸­ã€‚
ä¸ºæ­¤ï¼Œä½ åªéœ€è¦ä¸€ä¸ª`plopfile.js`, `package.json`ï¼Œä»¥åŠä¸€ä¸ªè¦å¼•ç”¨çš„æ¨¡æ¿ã€‚

ä½ çš„ `index.js` æ–‡ä»¶åº”å¦‚ä¸‹æ‰€ç¤ºï¼š

```javascript
#!/usr/bin/env node
const path = require('path');
const args = process.argv.slice(2);
const {Plop, run} = require('plop');
const argv = require('minimist')(args);

Plop.launch({
  cwd: argv.cwd,
  // ä¸ºäº†ä½¿ `plop` åœ¨ CWD æƒ…å†µä¸‹å§‹ç»ˆèƒ½å¤Ÿæ‹¾å– `plopfile.js`ï¼Œå¿…é¡»ä½¿ç”¨ `__dirname`
  configPath: path.join(__dirname, 'plopfile.js'),
  require: argv.require,
  completion: argv.completion
// è¿™å°†åˆå¹¶ `plop` argvå’Œç”Ÿæˆå™¨ argvã€‚
// è¿™æ„å‘³ç€ä½ ä¸éœ€è¦å†ç”¨ `--` äº†
}, env => run(env, undefined, true));
```

> è¯·æ³¨æ„ï¼Œå¦‚æœé€‰æ‹©ä½¿ç”¨ `env => run(env, undefined, true))`ï¼Œåœ¨ä½¿ç”¨ç”Ÿæˆå™¨å‚æ•°ä¼ é€’æ—¶å¯èƒ½ä¼šé‡åˆ°å‘½ä»¤åˆå¹¶é—®é¢˜ã€‚
>
> å¦‚æœæ‚¨æƒ³é€‰æ‹©é€€å‡ºæ­¤è¡Œä¸ºå¹¶åƒ plop é‚£æ ·è¡Œäº‹(è¦æ±‚ `--` åœ¨å°†å‘½åå‚æ•°ä¼ é€’ç»™ç”Ÿæˆå™¨ä¹‹å‰)ï¼Œåªéœ€ç”¨ `run` æ›¿æ¢ `env =>` ç®­å¤´å‡½æ•°:
>
>```javascript
>Plop.launch({}, run);
>```

æ‚¨çš„ `package.json` æ–‡ä»¶åº”å¦‚ä¸‹æ‰€ç¤ºï¼š

```json
{
  "name": "create-your-name-app",
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {
    "start": "plop",
  },
  "bin": {
    "create-your-name-app": "./index.js"
  },
  "preferGlobal": true,
  "dependencies": {
    "plop": "^2.6.0"
  }
}
```
### è®¾ç½®åŒ…è£…å™¨çš„åŸºæœ¬ç›®æ ‡è·¯å¾„

åœ¨åŒ…è£… plop æ—¶ï¼Œæ‚¨å¯èƒ½å¸Œæœ›åŸºäºè¿è¡ŒåŒ…è£…å™¨æ—¶çš„ cwd æ¥å®ç°ç›®æ ‡è·¯å¾„ã€‚ä½ å¯ä»¥åƒè¿™æ ·é…ç½® `dest` åŸºè·¯å¾„ï¼š

```javascript
Plop.launch({
	// åƒä¸Šé¢çš„é…ç½®
}, env => {
	const options = {
		...env,
		dest: process.cwd() // è¿™å°†ä½¿ç›®æ ‡è·¯å¾„åœ¨è°ƒç”¨åŒ…è£…å™¨æ—¶åŸºäº cwd
	}
	return run(options, undefined, true)
})
```

### æ·»åŠ å¸¸è§„ CLI æ“ä½œ

è®¸å¤š CLI å®ç”¨ç¨‹åºéƒ½ä¼šä¸ºæ‚¨å¤„ç†ä¸€äº›æ“ä½œï¼Œä¾‹å¦‚åœ¨ç”Ÿæˆæ¨¡æ¿åè¿è¡Œ`git init`æˆ– `npm install` ã€‚

å°½ç®¡æˆ‘ä»¬å¸Œæœ›æä¾›è¿™äº›æ“ä½œï¼Œä½†æˆ‘ä»¬ä¹Ÿå¸Œæœ›å°†æ ¸å¿ƒæ“ä½œé™åˆ¶åœ¨èŒƒå›´å†…ã€‚ 
å› æ­¤ï¼Œæˆ‘ä»¬ç»´æŠ¤äº†ä¸€ä¸ªåº“é›†åˆï¼Œè¿™äº›åº“æ—¨åœ¨å°†è¿™äº›æ“ä½œæ·»åŠ åˆ°[Awesome Plopåˆ—è¡¨](https://github.com/plopjs/awesome-plop)ä¸­çš„ Plop ä¸­ã€‚
åœ¨è¿™é‡Œï¼Œæ‚¨å°†èƒ½å¤Ÿæ‰¾åˆ°è¿™äº›æ“ä½œçš„é€‰é¡¹ï¼Œç”šè‡³å¯ä»¥æ„å»ºè‡ªå·±çš„æ“ä½œå¹¶å°†å…¶æ·»åŠ åˆ°åˆ—è¡¨ä¸­ï¼
### è¿›ä¸€æ­¥è‡ªå®šä¹‰

è™½ç„¶ `plop` ä¸º CLI å®ç”¨ç¨‹åºåŒ…è£…å™¨æä¾›äº†ä¸€ä¸ªå¾ˆæ£’çš„å®šåˆ¶çº§åˆ«ï¼Œä½†åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½åªæ˜¯æƒ³è¦æ›´å¤šåœ°æ§åˆ¶ CLI ä½“éªŒï¼ŒåŒæ—¶ä¹Ÿåˆ©ç”¨æ¨¡æ¿ç”Ÿæˆä»£ç ã€‚

å¹¸è¿çš„æ˜¯ï¼Œ[`node-plop`](https://github.com/plopjs/node-plop/) å¯èƒ½é€‚åˆä½ ! `plop` CLIæœ¬èº«å°±æ˜¯åŸºäºå®ƒæ„å»ºçš„ï¼Œå¹¶ä¸”å¯ä»¥å¾ˆå®¹æ˜“åœ°æ‰©å±•åˆ° CLI ä¸­çš„å…¶ä»–ç”¨é€”ã€‚
ä½†æ˜¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºä¸`node-plop`çš„é›†æˆï¼Œæ–‡æ¡£å¹¶æ²¡æœ‰é‚£ä¹ˆå……å®ã€‚
é‚£å°±æ˜¯è¯´å®ƒä»¬æ˜¯æ¶é¾™ã€‚

> æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œå…³äº `node-plop` é›†æˆçš„æ–‡æ¡£å¾ˆä¹å‘³ï¼Œä¸æ˜¯å‡ºäºè‡ªè±ªï¼Œè€Œæ˜¯è­¦å‘Šã€‚
> å¦‚æœæ‚¨æƒ³ä¸ºè¯¥é¡¹ç›®æä¾›æ–‡æ¡£ï¼Œè¯·è¿™æ ·åšï¼ æˆ‘ä»¬å§‹ç»ˆæ¬¢è¿å¹¶é¼“åŠ±æ‚¨çš„è´¡çŒ®ï¼
